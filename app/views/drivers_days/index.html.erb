<div class="gooi-container">
  <div class="outline">
    <div>
      <br>
      <h1>Driver's Days</h1>

      <table class="table table-bordered">
        <thead>
          <tr>
            <th scope="col">Date</th>
            <th scope="col">Start</th>
            <th scope="col">End</th>
            <th scope="col">KMs</th>
            <th scope="col">Households</th>
            <th scope="col">Buckets</th>
            <th scope="col">Trees ðŸŒ³</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @drivers_days.each do |drivers_day| %>
            <tr>
              <td>
                <%= link_to drivers_day.date.strftime('%a, %b %d, %Y'), drivers_day_path(drivers_day), class: "link-green" %>
              </td>
              <td>
                <%= drivers_day.start_time&.strftime('%I:%M %p') || 'â€”' %>
              </td>
              <td>
                <%= drivers_day.end_time&.strftime('%I:%M %p') || 'â€”' %>
              </td>
              <td>
                <% if drivers_day.start_kms && drivers_day.end_kms %>
                  <%= drivers_day.end_kms - drivers_day.start_kms %> km
                  <small class="text-muted d-block">
                    <%= drivers_day.start_kms %> â†’ <%= drivers_day.end_kms %>
                  </small>
                <% else %>
                  â€”
                <% end %>
              </td>
              <td>
                <%= drivers_day.collections.where(skip: false).count %>
              </td>
              <td>
                <%= drivers_day.total_buckets || 'â€”' %>
              </td>
              <td>
                <% if drivers_day.day_statistic %>
                  <%= number_with_precision(drivers_day.day_statistic.trees_net, precision: 1) %>
                  <small class="text-muted d-block">
                    <%= number_with_precision(drivers_day.day_statistic.net_kg, precision: 1) %> kg
                  </small>
                <% else %>
                  â€”
                <% end %>
              </td>
              <td>
                <%= link_to "View", drivers_day_path(drivers_day), class: "btn btn-sm btn-outline-primary" %>
                <%= link_to "Edit", edit_drivers_day_path(drivers_day), class: "btn btn-sm btn-outline-secondary" %>
                <%= link_to "Delete", drivers_day_path(drivers_day),
                    data: {turbo_method: :delete, turbo_confirm: "Are you sure? This will remove the driver's day but collections will remain."},
                    class: "btn btn-sm btn-outline-danger" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>

    </div>
  </div>
</div>
